PART
{

// --- general parameters ---
name = Nexus2RCS
module = Part
author = TD

// --- asset parameters ---
mesh = modelNex2.mu
scale = 1.0
rescaleFactor = 1.0

// --- node definitions ---
// definition format is Position X, Position Y, Position Z, Up X, Up Y, Up Z
node_attach = 0.0,  1.5, 0.0, 0.0, 1.0, 0.0, 4


// --- editor parameters ---
TechRequired = veryHeavyRocketry
entryCost = 3400
cost = 15450
category = Engine
subcategory = 0
title = Nexus2 Control Rocket Thruster
manufacturer = Konvair division of Kerbal Dynamics
description = Rockets to add a triffling two million pounds of thrust.  These LOX + LH rocket clusters are basically a twelve-pack of Rocketdyne J-2X rockets that are for placing in a pattern around the Nexus on the underside of the toroidal Oxygen tank.  While they don't have brilliant Isp at low altitude, they do provide quite a bit of extra thrust, and by using throttle adjustments, provide control as they are some distance from the centre-line.  Best used with symmetry, typically by-four, although using more could be useful for larger payloads.  About 10% of their thrust is set aside as RCS.

// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
attachRules = 0,1,0,0,0

// --- standard part parameters ---
mass = 1.58

dragModelType = default
maximum_drag = 0.001
minimum_drag = 0.001
angularDrag = 2
crashTolerance = 15
maxTemp = 3600

MODULE
{
	name = ModuleRCS
	thrusterTransformName = RCSTransform
	thrusterPower = 334
	resourceName = LqdHydrogen
	resourceFlowMode = STAGE_PRIORITY_FLOW
	useThrottle = True
	
	PROPELLANT
	{
		name = LiquidFuel
       	ratio = 0.9
		DrawGauge = True
	}
	PROPELLANT
	{
		name = Oxidizer
		ratio = 1.1
	}
	atmosphereCurve
	{
		key = 0 244
		key = 1 228
		key = 20 180
	}
}

stagingIcon = LIQUID_ENGINE
// --- FX definitions ---
    fx_exhaustLight_blue = 0.0, -200, 0.0, 0.0, 1.0, 0.0, running
	fx_exhaustFlame_blue = 0.0, -4, 0.0, 0.0, 1.0, 0.0, running
	//fx_smokeTrail_medium = 0.0, -1.6, 0.0, 0.0, 1.0, 0.0, running
	fx_exhaustSparks_flameout = 0.0, -0.2, 0.0, 0.0, 1.0, 0.0, flameout

// --- Sound FX definition ---

sound_vent_medium = engage
sound_rocket_hard = running
sound_vent_soft = disengage
sound_explosion_low = flameout
 
MODULE
{
	name = ModuleEngines
	thrustVectorTransformName = ThrustTransform
	exhaustDamage = True
	ignitionThreshold = 0.02
	minThrust = 0
	maxThrust = 3004
	heatProduction = 100
	fxOffset = 0, 0, 0
	PROPELLANT
	{
		name = LiquidFuel
       	ratio = 0.9
		DrawGauge = True
	}
	PROPELLANT
	{
		name = Oxidizer
		ratio = 1.1
	}
		atmosphereCurve
		{
			key = 0 244
			key = 1 228
			key = 20 180
		}
	
}

}
@PART[Nexus2RCS]:NEEDS[CommunityResourcePack&!RealismOverhaul]
{
  @MODULE[ModuleEngines]
  {
    @maxThrust = 2002
	!PROPELLANT[LiquidFuel]{}
	!PROPELLANT[Oxidizer]{}
	PROPELLANT
	{
		name = LqdHydrogen
		ratio = 9.66
		DrawGauge = True
	}
	PROPELLANT
	{
		name = LqdOxygen
		ratio = 3
	}
	@atmosphereCurve
	{
		key = 0 310
		key = 1 290
		key = 20 180
	}
	
	
  }
    @MODULE[ModuleRCS*]
  {
    @thrusterPower = 222
	!PROPELLANT[LiquidFuel]{}
	!PROPELLANT[Oxidizer]{}
	PROPELLANT
	{
		name = LqdHydrogen
		ratio = 9.66
		DrawGauge = True
	}
	PROPELLANT
	{
		name = LqdOxygen
		ratio = 3
	}
	@atmosphereCurve
	{
		key = 0 310
		key = 1 290
		key = 20 180
	}
	
	
  }
}
